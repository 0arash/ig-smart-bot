(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function a(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(e){if(e.ep)return;e.ep=!0;const n=a(e);fetch(e.href,n)}})();let x=document.createElement("script");x.setAttribute("src","https://unpkg.com/axios/dist/axios.min.js");document.body.appendChild(x);x.addEventListener("load",()=>{let h=document.createElement("script");h.setAttribute("src","https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"),document.body.appendChild(h),h.addEventListener("load",()=>{let l=document.createElement("script");l.setAttribute("src","http://localhost:3000/socket.io/socket.io.js"),document.body.appendChild(l),l.addEventListener("load",()=>{const a=()=>{const i={type:"text",content:y.value};s.emit("send_chat",{message:i}),b(i,1),y.value=""},c=document.getElementById("hix-chatbox"),e=document.getElementById("hix-chatbtn");document.getElementById("hix-close-chat-btn").addEventListener("click",()=>{c.classList.contains("hidden")||c.classList.add("hidden")}),e.addEventListener("click",()=>{c.classList.contains("hidden")?c.classList.remove("hidden"):c.classList.add("hidden"),screen.width<768&&(e.classList.contains("hidden")?e.classList.remove("hidden"):e.classList.add("hidden"))});let s;axios.post("http://localhost:3000/chat",{api_key:"12345"}).then(i=>{s=io("http://localhost:3000",{withCredentials:!0}),s.on("connect",()=>{s.on("user_id",m=>{console.log(m)}),s.on("send_chat",m=>{b(m.message,0)})}),s.connect()});const y=document.getElementById("msg"),f=document.getElementById("send");f.addEventListener("click",a);const v=document.getElementById("chatScreen");function b(i,m){const g=Math.random().toString(36).substring(2,8),d=document.createElement("li");if(m==1?d.classList.add("mb-4","min-h-12","min-w-12","px-5","py-3","bg-gradient-to-b","from-orange-500","via-yellow-500","to-yellow-500","rounded-t-3xl","rounded-r-3xl","break-words","chat-bubble","self-end"):d.classList.add("mb-4","min-h-12","min-w-12","px-5","py-3","rounded-l-3xl","rounded-t-3xl","bg-slate-300","break-words","chat-bubble","self-start"),i.type=="form"){f.removeEventListener("click",a),f.setAttribute("disabled",!0);const t=document.createElement("div");t.classList.add("flex","flex-col","gap-y-2"),Object.entries(i.content).forEach(r=>{switch(r[1].type){case"string":t.insertAdjacentHTML("beforeend",`<div>
                                        <input style="width: 100%;" class="rounded-lg p-2" placeholder="${r[1].placeholder}" type="text">
                                    </div>
                                `);break;case"mobile":t.insertAdjacentHTML("beforeend",`<div dir="ltr" class="flex flex-row mt-3 gap-x-2 justify-around px-3">
                                        <div>
                                            <select class="rounded-lg px-5">
                                                <option value="">+98</option>
                                            </select>
                                        </div>
                                        <div>
                                            <input class="rounded-lg placeholder:text-center p-0.5" type="tel"
                                                placeholder="*** *** ****" maxlength="10" id="">
                                        </div>
                                    </div>
                                    `);break;case"boolean":t.insertAdjacentHTML("beforeend",`<div class="flex items-center justify-center gap-3">
                                        <input type="checkbox" id="">${r[1].name}
                                    </div>
                                    `);break;case"array":t.insertAdjacentHTML("beforeend",`<div>
                                        <select class="w-full rounded-lg p-2">
                                            ${r[1].options.map((p,u)=>`<option value="${u}">${p}</option>`).join("")}
                                        </select>
                                    </div>
                                    `);break}});const o=document.createElement("button");o.setAttribute("style","background-color: #333 !important"),o.classList.add("bg-blue-500","text-white","p-2","rounded-full","w-full"),o.innerHTML="ارسال",o.addEventListener("click",()=>{f.addEventListener("click",a)}),t.insertAdjacentElement("beforeend",o),d.insertAdjacentElement("beforeend",t)}else if(i.type=="catalog"){const t=document.createElement("div");t.id=`swiper-${g}`;const o=document.createElement("div");o.id=`snext-${g}`,o.className="swiper-button-next";const r=document.createElement("div");r.id=`sprev-${g}`,r.className="swiper-button-prev";const p=document.createElement("div");p.id=`catalog-${g}`,p.className="swiper-wrapper",t.appendChild(p),t.appendChild(o),t.appendChild(r),i.content.items.forEach(u=>{p.insertAdjacentHTML("beforeend",`
                                        <div class="swiper-slide flex flex-col border-double border-4 border-sky-500 rounded-2xl content-between items-center">
                                            <img class="rounded-t-lg w-full" src="${u.imageUrl}" alt="">
                                            <div class=" bg-white text-[15px] p-1 w-full text-center">
                                                <p>${u.name}</p>
                                            </div>
                                            <div class="flex justify-items-stretch bg-main-color text-white w-full rounded-b-lg p-3">
                                            <a class="w-full text-center" href="${u.link}" target="_blank">مشاهده
                                            و خرید
                                            </a>
                                            </div>
                                        </div>
                                            `)});var w=new Swiper(t,{effect:"coverflow",centeredSlides:!0,slidesPerView:"auto",autoHeight:!0,coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},loop:!0,simulateTouch:!0,navigation:{nextEl:o,prevEl:r}});w.changeLanguageDirection("rtl"),d.appendChild(t)}else i.type=="text"&&(d.innerHTML=i.content);v.appendChild(d),v.parentElement.scrollTop=v.parentElement.scrollHeight}b({type:"form",content:{name:{type:"string",placeholder:"نام"},lastname:{type:"string",placeholder:" نام خانوادگی"},mobile:{type:"mobile"},gender:{type:"array",options:["Male","Female","Transexual"]},terms:{type:"boolean",name:"Check"}}}),b({type:"catalog",content:{items:[{name:"Pool",imageUrl:"https://picsum.photos/200/200",link:"#0"},{name:"کفش مردانه",imageUrl:"https://picsum.photos/200/200",link:"#1"},{name:"کفش زنانه",imageUrl:"https://picsum.photos/200/200",link:"#2"},{name:"کفش بچه ها",imageUrl:"https://picsum.photos/200/200",link:"#3"},{name:"کفش مردانه",imageUrl:"https://picsum.photos/200/200",link:"#1"},{name:"کفش زنانه",imageUrl:"https://picsum.photos/200/200",link:"#2"},{name:"کفش بچه ها",imageUrl:"https://picsum.photos/200/200",link:"#3"},{name:"کفش مردانه",imageUrl:"https://picsum.photos/200/200",link:"#1"},{name:"کفش زنانه",imageUrl:"https://picsum.photos/200/200",link:"#2"},{name:"کفش بچه ها",imageUrl:"https://picsum.photos/200/200",link:"#3"}]}})}),l.addEventListener("error",a=>{console.log(a)})})});
